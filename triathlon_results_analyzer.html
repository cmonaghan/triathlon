<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triathlon Analysis - Napa 2025</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš´</text></svg>">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 30px;
        }

        .search-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e4e8;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            margin-top: 30px;
        }

        .athlete-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .athlete-card h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .athlete-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .info-item .label {
            font-size: 0.85em;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .info-item .value {
            font-size: 1.3em;
            font-weight: 700;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .chart-container h3 {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #333;
        }

        .percentile-badge {
            display: inline-block;
            background: #ffd700;
            color: #333;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .stat-label-note {
            display: block;
            font-size: 0.75em;
            color: #999;
            font-weight: 400;
            font-style: italic;
            margin-top: 5px;
            margin-left: 0;
        }

        .footer {
            margin-top: 60px;
            padding: 30px 20px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
            background-color: #f8f9fa;
            color: #666;
            font-size: 0.9em;
        }

        .footer p {
            margin: 0;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-card .stat-label {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 8px;
        }

        .stat-card .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #333;
        }

        .stat-card .stat-detail {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .autocomplete-container {
            position: relative;
        }

        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e1e4e8;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            margin-top: 5px;
        }

        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s ease;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background-color: #f8f9fa;
        }

        .autocomplete-item.selected {
            background-color: #e8f0fe;
            border-left: 3px solid #667eea;
        }

        .autocomplete-item-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .autocomplete-item-details {
            font-size: 0.85em;
            color: #666;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/javascript">
const {
  useState,
  useEffect,
  useMemo,
  useRef
} = React;
function TriathlonAnalyzer() {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [searchName, setSearchName] = useState('');
  const [selectedEvent, setSelectedEvent] = useState('');
  const [selectedGender, setSelectedGender] = useState('All');
  const [selectedAgeGroup, setSelectedAgeGroup] = useState('All');
  const [athleteResult, setAthleteResult] = useState(null);
  const [showAutocomplete, setShowAutocomplete] = useState(false);
  const [selectedIndex, setSelectedIndex] = useState(-1);
  const swimChartRef = useRef(null);
  const bikeChartRef = useRef(null);
  const runChartRef = useRef(null);
  const overallChartRef = useRef(null);
  const autocompleteRef = useRef(null);
  const inputRef = useRef(null);
  const chartInstances = useRef({});
  useEffect(() => {
    fetch('/complete_triathlon_results.csv').then(response => response.text()).then(csvText => {
      Papa.parse(csvText, {
        header: true,
        dynamicTyping: true,
        skipEmptyLines: true,
        complete: results => {
          setData(results.data);
          setLoading(false);
          if (results.data.length > 0) {
            setSelectedEvent(results.data[0].Event);
          }
        },
        error: error => {
          setError('Error parsing CSV: ' + error.message);
          setLoading(false);
        }
      });
    }).catch(err => {
      setError('Error loading data: ' + err.message);
      setLoading(false);
    });
  }, []);
  const events = useMemo(() => {
    return [...new Set(data.map(row => row.Event))].filter(Boolean).sort();
  }, [data]);

  // Extract age group from strings like "Female 10-14" -> "10-14"
  const extractAgeGroup = ageGroupStr => {
    if (!ageGroupStr) return null;
    // Handle special cases
    if (ageGroupStr.includes('Overall') || ageGroupStr === 'DNF') {
      return ageGroupStr;
    }
    // Extract age range (e.g., "10-14", "25-29", "9 & Under")
    const match = ageGroupStr.match(/(\d+\s*&\s*Under|\d+-\d+)/);
    return match ? match[1] : ageGroupStr;
  };
  const ageGroups = useMemo(() => {
    if (!selectedEvent) return [];
    const filtered = data.filter(row => row.Event === selectedEvent);
    const extractedGroups = filtered.map(row => extractAgeGroup(row.Age_Group)).filter(Boolean);
    return [...new Set(extractedGroups)].sort((a, b) => {
      // Sort special cases first
      if (a === 'DNF' || a.includes('Overall')) return 1;
      if (b === 'DNF' || b.includes('Overall')) return -1;
      // Sort "9 & Under" first
      if (a.includes('& Under')) return -1;
      if (b.includes('& Under')) return 1;
      // Extract first number for numeric sorting
      const aNum = parseInt(a.match(/\d+/)?.[0] || '999');
      const bNum = parseInt(b.match(/\d+/)?.[0] || '999');
      return aNum - bNum;
    });
  }, [data, selectedEvent]);
  const autocompleteSuggestions = useMemo(() => {
    if (!searchName.trim() || searchName.trim().length < 2) return [];
    const searchLower = searchName.toLowerCase().trim();
    const uniqueNames = new Map();
    data.forEach(row => {
      if (row.Name && row.Name.toLowerCase().includes(searchLower)) {
        if (!uniqueNames.has(row.Name)) {
          uniqueNames.set(row.Name, row);
        }
      }
    });
    return Array.from(uniqueNames.values()).slice(0, 10).sort((a, b) => {
      const aStarts = a.Name.toLowerCase().startsWith(searchLower);
      const bStarts = b.Name.toLowerCase().startsWith(searchLower);
      if (aStarts && !bStarts) return -1;
      if (!aStarts && bStarts) return 1;
      return a.Name.localeCompare(b.Name);
    });
  }, [data, searchName]);
  const timeToSeconds = timeStr => {
    if (!timeStr || timeStr === '-1') return null;
    // Convert to string if it's not already
    const timeString = String(timeStr);
    if (!timeString || timeString === '-1' || timeString === 'null' || timeString === 'undefined') return null;
    const parts = timeString.split(':').map(Number);
    if (parts.length === 3) {
      return parts[0] * 3600 + parts[1] * 60 + parts[2];
    } else if (parts.length === 2) {
      return parts[0] * 60 + parts[1];
    }
    return null;
  };
  const secondsToTime = seconds => {
    if (!seconds) return 'N/A';
    const h = Math.floor(seconds / 3600);
    const m = Math.floor(seconds % 3600 / 60);
    const s = Math.floor(seconds % 60);
    if (h > 0) {
      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }
    return `${m}:${s.toString().padStart(2, '0')}`;
  };
  const calculatePercentile = (value, sortedValues) => {
    if (!value || !sortedValues.length) return null;
    const rank = sortedValues.filter(v => v <= value).length;
    return Math.round(rank / sortedValues.length * 100);
  };
  const filteredData = useMemo(() => {
    let filtered = data.filter(row => row.Event === selectedEvent);
    if (selectedGender !== 'All') {
      filtered = filtered.filter(row => row.Gender === selectedGender);
    }
    if (selectedAgeGroup !== 'All') {
      filtered = filtered.filter(row => {
        const extractedAge = extractAgeGroup(row.Age_Group);
        return extractedAge === selectedAgeGroup;
      });
    }
    return filtered;
  }, [data, selectedEvent, selectedGender, selectedAgeGroup]);

  // When name is entered, find athlete and set their event
  useEffect(() => {
    if (!searchName.trim() || !data.length) {
      return;
    }

    // Find athlete by name (without event filter first)
    const athlete = data.find(row => row.Name && row.Name.toLowerCase().includes(searchName.toLowerCase().trim()));
    if (athlete && athlete.Event && athlete.Event !== selectedEvent) {
      setSelectedEvent(athlete.Event);
    }
  }, [searchName, data]);

  // Auto-update results when name, event, or filters change
  useEffect(() => {
    if (!searchName.trim() || !selectedEvent) {
      if (!searchName.trim()) {
        setError(null);
        setAthleteResult(null);
      }
      return;
    }
    const athlete = data.find(row => row.Name && row.Name.toLowerCase().includes(searchName.toLowerCase().trim()) && row.Event === selectedEvent);
    if (!athlete) {
      setError(`No athlete found with name "${searchName}" in ${selectedEvent}`);
      setAthleteResult(null);
      return;
    }
    setError(null);
    const comparisonData = filteredData;
    const swimTimes = comparisonData.map(row => timeToSeconds(row.Swim_Time)).filter(Boolean).sort((a, b) => a - b);
    const bikeTimes = comparisonData.map(row => timeToSeconds(row.Bike_Time)).filter(Boolean).sort((a, b) => a - b);
    const runTimes = comparisonData.map(row => timeToSeconds(row.Run_Time)).filter(Boolean).sort((a, b) => a - b);
    const overallTimes = comparisonData.map(row => timeToSeconds(row.Finish_Time)).filter(Boolean).sort((a, b) => a - b);
    const athleteSwim = timeToSeconds(athlete.Swim_Time);
    const athleteBike = timeToSeconds(athlete.Bike_Time);
    const athleteRun = timeToSeconds(athlete.Run_Time);
    const athleteOverall = timeToSeconds(athlete.Finish_Time);

    // Calculate place within filtered group
    const filteredPlace = overallTimes.filter(t => t <= athleteOverall).length;
    setAthleteResult({
      ...athlete,
      swimSeconds: athleteSwim,
      bikeSeconds: athleteBike,
      runSeconds: athleteRun,
      overallSeconds: athleteOverall,
      swimPercentile: calculatePercentile(athleteSwim, swimTimes),
      bikePercentile: calculatePercentile(athleteBike, bikeTimes),
      runPercentile: calculatePercentile(athleteRun, runTimes),
      overallPercentile: calculatePercentile(athleteOverall, overallTimes),
      filteredPlace: filteredPlace,
      comparisonGroup: {
        event: selectedEvent,
        gender: selectedGender,
        ageGroup: selectedAgeGroup,
        totalAthletes: comparisonData.length
      }
    });
  }, [searchName, selectedEvent, filteredData, data]);
  const generateDistributionData = segment => {
    if (!filteredData.length) return [];
    const times = filteredData.map(row => {
      switch (segment) {
        case 'swim':
          return timeToSeconds(row.Swim_Time);
        case 'bike':
          return timeToSeconds(row.Bike_Time);
        case 'run':
          return timeToSeconds(row.Run_Time);
        case 'overall':
          return timeToSeconds(row.Finish_Time);
        default:
          return null;
      }
    }).filter(Boolean).sort((a, b) => a - b);
    if (!times.length) return [];
    const athleteTime = athleteResult ? athleteResult[`${segment}Seconds`] : null;
    const min = Math.min(...times);
    const max = Math.max(...times);
    const binCount = 20;
    const binSize = (max - min) / binCount;
    const bins = Array.from({
      length: binCount
    }, (_, i) => {
      const binStart = min + i * binSize;
      const binEnd = binStart + binSize;
      const count = times.filter(t => t >= binStart && t < binEnd).length;
      const isAthleteBin = athleteTime ? athleteTime >= binStart && athleteTime < binEnd : false;
      return {
        range: `${secondsToTime(binStart)}`,
        count,
        binStart,
        binEnd,
        isAthleteBin
      };
    });
    return bins;
  };
  useEffect(() => {
    if (!selectedEvent || !filteredData.length) return;

    // Destroy existing charts
    Object.values(chartInstances.current).forEach(chart => {
      if (chart) chart.destroy();
    });
    chartInstances.current = {};

    // Create charts for each segment
    ['swim', 'bike', 'run', 'overall'].forEach(segment => {
      const canvasRef = {
        swim: swimChartRef,
        bike: bikeChartRef,
        run: runChartRef,
        overall: overallChartRef
      }[segment];
      if (!canvasRef.current) return;
      const distributionData = generateDistributionData(segment);
      if (!distributionData.length) return;
      const ctx = canvasRef.current.getContext('2d');
      chartInstances.current[segment] = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: distributionData.map(d => d.range),
          datasets: [{
            label: 'Number of Athletes',
            data: distributionData.map(d => d.count),
            backgroundColor: distributionData.map(d => d.isAthleteBin ? '#f5576c' : '#667eea'),
            borderRadius: 8,
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                title: items => {
                  const index = items[0].dataIndex;
                  const bin = distributionData[index];
                  return `${bin.range} - ${secondsToTime(bin.binEnd)}`;
                },
                label: context => {
                  return `Athletes: ${context.parsed.y}`;
                }
              }
            }
          },
          scales: {
            x: {
              ticks: {
                maxRotation: 45,
                minRotation: 45,
                font: {
                  size: 10
                }
              }
            },
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Number of Athletes'
              }
            }
          }
        }
      });
    });
    return () => {
      Object.values(chartInstances.current).forEach(chart => {
        if (chart) chart.destroy();
      });
    };
  }, [selectedEvent, filteredData, athleteResult]);

  // Handle clicks outside autocomplete
  useEffect(() => {
    const handleClickOutside = event => {
      if (autocompleteRef.current && !autocompleteRef.current.contains(event.target) && inputRef.current && !inputRef.current.contains(event.target)) {
        setShowAutocomplete(false);
        setSelectedIndex(-1);
      }
    };
    document.addEventListener('mousedown', handleClickOutside);
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, []);

  // Reset selected index when suggestions change
  useEffect(() => {
    setSelectedIndex(-1);
  }, [autocompleteSuggestions]);
  const handleNameSelect = name => {
    setSearchName(name);
    setShowAutocomplete(false);
    setSelectedIndex(-1);
  };
  const handleKeyDown = e => {
    if (!showAutocomplete || autocompleteSuggestions.length === 0) {
      if (e.key === 'ArrowDown' && autocompleteSuggestions.length > 0) {
        setShowAutocomplete(true);
        setSelectedIndex(0);
      }
      return;
    }
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      setSelectedIndex(prev => prev < autocompleteSuggestions.length - 1 ? prev + 1 : prev);
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      setSelectedIndex(prev => prev > 0 ? prev - 1 : -1);
    } else if (e.key === 'Enter' && selectedIndex >= 0) {
      e.preventDefault();
      handleNameSelect(autocompleteSuggestions[selectedIndex].Name);
    } else if (e.key === 'Escape') {
      setShowAutocomplete(false);
      setSelectedIndex(-1);
    }
  };
  if (loading) {
    return /*#__PURE__*/React.createElement("div", {
      className: "loading"
    }, "Loading triathlon data...");
  }
  return /*#__PURE__*/React.createElement("div", {
    className: "container"
  }, /*#__PURE__*/React.createElement("div", {
    className: "header"
  }, /*#__PURE__*/React.createElement("h1", null, "\uD83C\uDFCA\u200D\u2642\uFE0F\uD83D\uDEB4\u200D\u2640\uFE0F\uD83C\uDFC3\u200D\u2642\uFE0F Triathlon Results Analyzer \uD83C\uDFCA\u200D\u2642\uFE0F\uD83D\uDEB4\u200D\u2640\uFE0F\uD83C\uDFC3\u200D\u2642\uFE0F"), /*#__PURE__*/React.createElement("p", null, "Compare your performance against other athletes."), /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("p", null, " This site uses race data from the", ' ', /*#__PURE__*/React.createElement("a", {
    href: "https://my.raceresult.com/367536/",
    target: "_blank",
    rel: "noopener noreferrer",
    style: {
      color: 'white',
      textDecoration: 'underline',
      fontWeight: '600'
    }
  }, "2025 Alpha Win Napa Valley Fall Triathlon"), ' ', "held on October 25, 2025 in Napa, California."), /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("p", null, "Note that due to weather conditions on the day of the race, the swim portion was cancelled and replaced with a run of similar distance.")), /*#__PURE__*/React.createElement("div", {
    className: "content"
  }, /*#__PURE__*/React.createElement("div", {
    className: "search-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", null, "Athlete Name"), /*#__PURE__*/React.createElement("div", {
    className: "autocomplete-container",
    ref: autocompleteRef
  }, /*#__PURE__*/React.createElement("input", {
    ref: inputRef,
    type: "text",
    placeholder: "Enter athlete name...",
    value: searchName,
    onChange: e => {
      setSearchName(e.target.value);
      setShowAutocomplete(true);
      setSelectedIndex(-1);
    },
    onFocus: () => {
      if (autocompleteSuggestions.length > 0) {
        setShowAutocomplete(true);
      }
    },
    onKeyDown: handleKeyDown
  }), showAutocomplete && autocompleteSuggestions.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "autocomplete-dropdown"
  }, autocompleteSuggestions.map((athlete, index) => /*#__PURE__*/React.createElement("div", {
    key: index,
    className: `autocomplete-item ${selectedIndex === index ? 'selected' : ''}`,
    onClick: () => handleNameSelect(athlete.Name),
    onMouseEnter: () => setSelectedIndex(index)
  }, /*#__PURE__*/React.createElement("div", {
    className: "autocomplete-item-name"
  }, athlete.Name), /*#__PURE__*/React.createElement("div", {
    className: "autocomplete-item-details"
  }, athlete.Event, " \u2022 ", athlete.Gender, " \u2022 ", extractAgeGroup(athlete.Age_Group))))))), /*#__PURE__*/React.createElement("div", {
    className: "form-row"
  }, /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", null, "Event"), /*#__PURE__*/React.createElement("select", {
    value: selectedEvent,
    onChange: e => setSelectedEvent(e.target.value),
    disabled: !!searchName.trim(),
    style: searchName.trim() ? {
      opacity: 0.6,
      cursor: 'not-allowed'
    } : {}
  }, /*#__PURE__*/React.createElement("option", {
    value: ""
  }, "Select Event"), events.map(event => /*#__PURE__*/React.createElement("option", {
    key: event,
    value: event
  }, event)))), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", null, "Gender Filter"), /*#__PURE__*/React.createElement("select", {
    value: selectedGender,
    onChange: e => setSelectedGender(e.target.value)
  }, /*#__PURE__*/React.createElement("option", {
    value: "All"
  }, "All Genders"), /*#__PURE__*/React.createElement("option", {
    value: "Male"
  }, "Male"), /*#__PURE__*/React.createElement("option", {
    value: "Female"
  }, "Female"), /*#__PURE__*/React.createElement("option", {
    value: "Agender"
  }, "Agender"))), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", null, "Age Group Filter"), /*#__PURE__*/React.createElement("select", {
    value: selectedAgeGroup,
    onChange: e => setSelectedAgeGroup(e.target.value)
  }, /*#__PURE__*/React.createElement("option", {
    value: "All"
  }, "All Age Groups"), ageGroups.map(ag => /*#__PURE__*/React.createElement("option", {
    key: ag,
    value: ag
  }, ag)))))), error && /*#__PURE__*/React.createElement("div", {
    className: "error-message"
  }, error), athleteResult && searchName.trim() && /*#__PURE__*/React.createElement("div", {
    className: "results-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "athlete-card"
  }, /*#__PURE__*/React.createElement("h2", null, athleteResult.Name), /*#__PURE__*/React.createElement("div", {
    className: "athlete-info"
  }, /*#__PURE__*/React.createElement("div", {
    className: "info-item"
  }, /*#__PURE__*/React.createElement("div", {
    className: "label"
  }, "Age"), /*#__PURE__*/React.createElement("div", {
    className: "value"
  }, athleteResult.Age || 'N/A')), /*#__PURE__*/React.createElement("div", {
    className: "info-item"
  }, /*#__PURE__*/React.createElement("div", {
    className: "label"
  }, "Gender"), /*#__PURE__*/React.createElement("div", {
    className: "value"
  }, athleteResult.Gender)), /*#__PURE__*/React.createElement("div", {
    className: "info-item"
  }, /*#__PURE__*/React.createElement("div", {
    className: "label"
  }, "Age Group"), /*#__PURE__*/React.createElement("div", {
    className: "value"
  }, extractAgeGroup(athleteResult.Age_Group))), /*#__PURE__*/React.createElement("div", {
    className: "info-item"
  }, /*#__PURE__*/React.createElement("div", {
    className: "label"
  }, "Overall Place"), /*#__PURE__*/React.createElement("div", {
    className: "value"
  }, "#", athleteResult.filteredPlace, " of ", athleteResult.comparisonGroup.totalAthletes)), /*#__PURE__*/React.createElement("div", {
    className: "info-item"
  }, /*#__PURE__*/React.createElement("div", {
    className: "label"
  }, "Club"), /*#__PURE__*/React.createElement("div", {
    className: "value"
  }, athleteResult.Club || 'N/A'))), /*#__PURE__*/React.createElement("p", {
    style: {
      marginTop: '15px',
      fontSize: '0.9em',
      opacity: '0.9'
    }
  }, "Comparing against: ", athleteResult.comparisonGroup.totalAthletes, " athletes", selectedGender !== 'All' && ` (${selectedGender})`, selectedAgeGroup !== 'All' && ` in ${selectedAgeGroup}`)), /*#__PURE__*/React.createElement("div", {
    className: "stats-grid"
  }, /*#__PURE__*/React.createElement("div", {
    className: "stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "stat-label"
  }, "\uD83C\uDFCA\u200D\u2642\uFE0F Swim Time"), /*#__PURE__*/React.createElement("div", {
    className: "stat-value"
  }, athleteResult.Swim_Time), /*#__PURE__*/React.createElement("div", {
    className: "stat-detail"
  }, athleteResult.swimPercentile, "th percentile", /*#__PURE__*/React.createElement("br", null), "Rank: ", athleteResult.Swim_Rank)), /*#__PURE__*/React.createElement("div", {
    className: "stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "stat-label"
  }, "\uD83D\uDEB4\u200D\u2640\uFE0F Bike Time"), /*#__PURE__*/React.createElement("div", {
    className: "stat-value"
  }, athleteResult.Bike_Time), /*#__PURE__*/React.createElement("div", {
    className: "stat-detail"
  }, athleteResult.bikePercentile, "th percentile", /*#__PURE__*/React.createElement("br", null), "Rank: ", athleteResult.Bike_Rank, " (", athleteResult.Bike_MPH, " mph)")), /*#__PURE__*/React.createElement("div", {
    className: "stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "stat-label"
  }, "\uD83C\uDFC3\u200D\u2642\uFE0F Run Time"), /*#__PURE__*/React.createElement("div", {
    className: "stat-value"
  }, athleteResult.Run_Time), /*#__PURE__*/React.createElement("div", {
    className: "stat-detail"
  }, athleteResult.runPercentile, "th percentile", /*#__PURE__*/React.createElement("br", null), "Rank: ", athleteResult.Run_Rank, " (", athleteResult.Run_Pace, " pace)")), /*#__PURE__*/React.createElement("div", {
    className: "stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "stat-label"
  }, "\u23F1\uFE0F Overall Time"), /*#__PURE__*/React.createElement("div", {
    className: "stat-value"
  }, athleteResult.Finish_Time), /*#__PURE__*/React.createElement("div", {
    className: "stat-detail"
  }, athleteResult.overallPercentile, "th percentile", /*#__PURE__*/React.createElement("br", null), "Place: ", athleteResult.filteredPlace, " of ", athleteResult.comparisonGroup.totalAthletes)))), selectedEvent && filteredData.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "results-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "chart-container"
  }, /*#__PURE__*/React.createElement("h3", null, "Swim Time Distribution", athleteResult && athleteResult.swimPercentile && /*#__PURE__*/React.createElement("span", {
    className: "percentile-badge"
  }, athleteResult.swimPercentile, "th Percentile")), /*#__PURE__*/React.createElement("span", {
    className: "stat-label-note"
  }, "Note: Swim portion was cancelled and replaced with a run of similar distance"), /*#__PURE__*/React.createElement("div", {
    style: {
      height: '300px',
      position: 'relative'
    }
  }, /*#__PURE__*/React.createElement("canvas", {
    ref: swimChartRef
  }))), /*#__PURE__*/React.createElement("div", {
    className: "chart-container"
  }, /*#__PURE__*/React.createElement("h3", null, "Bike Time Distribution", athleteResult && athleteResult.bikePercentile && /*#__PURE__*/React.createElement("span", {
    className: "percentile-badge"
  }, athleteResult.bikePercentile, "th Percentile")), /*#__PURE__*/React.createElement("div", {
    style: {
      height: '300px',
      position: 'relative'
    }
  }, /*#__PURE__*/React.createElement("canvas", {
    ref: bikeChartRef
  }))), /*#__PURE__*/React.createElement("div", {
    className: "chart-container"
  }, /*#__PURE__*/React.createElement("h3", null, "Run Time Distribution", athleteResult && athleteResult.runPercentile && /*#__PURE__*/React.createElement("span", {
    className: "percentile-badge"
  }, athleteResult.runPercentile, "th Percentile")), /*#__PURE__*/React.createElement("div", {
    style: {
      height: '300px',
      position: 'relative'
    }
  }, /*#__PURE__*/React.createElement("canvas", {
    ref: runChartRef
  }))), /*#__PURE__*/React.createElement("div", {
    className: "chart-container"
  }, /*#__PURE__*/React.createElement("h3", null, "Overall Time Distribution", athleteResult && athleteResult.overallPercentile && /*#__PURE__*/React.createElement("span", {
    className: "percentile-badge"
  }, athleteResult.overallPercentile, "th Percentile")), /*#__PURE__*/React.createElement("div", {
    style: {
      height: '300px',
      position: 'relative'
    }
  }, /*#__PURE__*/React.createElement("canvas", {
    ref: overallChartRef
  })))), !athleteResult && !error && !selectedEvent && /*#__PURE__*/React.createElement("div", {
    className: "no-results"
  }, /*#__PURE__*/React.createElement("p", null, "Select an event and enter an athlete name to see detailed results"))), /*#__PURE__*/React.createElement("div", {
    className: "footer"
  }, /*#__PURE__*/React.createElement("p", null, "This site was created by Christian Monaghan. See more of his work at ", /*#__PURE__*/React.createElement("a", {
    href: "https://woolgathering.io",
    target: "_blank",
    rel: "noopener noreferrer"
  }, "woolgathering.io"), ".")));
}
ReactDOM.render(/*#__PURE__*/React.createElement(TriathlonAnalyzer, null), document.getElementById('root'));
</script></script>
</body>
</html>
